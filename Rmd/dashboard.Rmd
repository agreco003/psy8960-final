---
title: "PSY 8960 Final Project"
author: "Anthony Greco"
date: "`r Sys.Date()`"
output: html_document
knit: (function(input, ...) {
    rmarkdown::render(
      input,
      output_dir = "../out"
    )
  })
---

```{r Script Settings and Resources, include=FALSE}
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
library(tidyverse)
```

```{r Data Import and Cleaning, include = FALSE}
skinny_tbl <- readRDS(file = "../out/fulldataset.rds") %>% 
  mutate(across(.cols = c(Gender, Department, EducationField, JobRole), .fns = ~ factor(.)),
         "Turnover Status" = as.logical(str_replace_all(Attrition, c("No" = "FALSE", "Yes" = "TRUE"))),
         "Monthly Pay" = MonthlyIncome,
         "Job Satisfaction" = JobSatisfaction, 
         "Education Field" = EducationField,
         "Job Role" = JobRole)  %>%
  select("Monthly Pay", "Turnover Status", "Job Satisfaction", Department, "Education Field", Gender, "Job Role")
```

# **Reproducible Image and Online Resources**
An interactive web app for this data is available by [clicking this link.](link goes here)

Explanation of Approach:
First, all variables designated as potential filters or categorical outcomes were converted to factors, making them easier to filter or produce into results later in the shiny app. Data was then saved as a skinny RDS output. This was written without an else statement so that if no cases, produces no visualization! Therefore no misunderstanding of the data can occur.

```{r Publication, include=FALSE}
saveRDS(skinny_tbl, file = "../out/skinnydataset.rds")
saveRDS(skinny_tbl, file = "../shiny/people_dashboard/skinnydataset.rds") #saved originally to both locations, one to preserve in the out folder and one to run the app itself
```